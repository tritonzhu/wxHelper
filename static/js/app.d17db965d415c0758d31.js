webpackJsonp([1],Array(54).concat([function(e,t,n){var i=n(2)(n(84),n(180),null,null);e.exports=i.exports},function(e,t,n){n(160);var i=n(2)(n(95),n(188),null,null);e.exports=i.exports},function(e,t,n){"use strict";var i=n(1),s=n(195),r=n(176),a=n.n(r),o=n(175),l=n.n(o);i.default.use(s.a),t.a=new s.a({mode:"history",routes:[{path:"/",name:"Root",component:a.a},{path:"/login",name:"Login",component:a.a},{path:"/index",name:"Index",component:l.a}]})},,function(e,t){},function(e,t,n){var i=n(2)(n(96),n(183),null,null);e.exports=i.exports},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),s=n(60),r=n.n(s),a=n(59),o=n.n(a),l=n(56),c=n(57),u=n.n(c),d=n(58);n.n(d);i.default.config.productionTip=!1,i.default.use(r.a),i.default.use(u.a),new i.default({el:"#app",router:l.a,template:"<App/>",components:{App:o.a}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"ElButtonGroup"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"ElButton",props:{type:{type:String,default:"default"},size:String,icon:{type:String,default:""},nativeType:{type:String,default:"button"},loading:Boolean,disabled:Boolean,plain:Boolean,autofocus:Boolean},methods:{handleClick:function(e){this.$emit("click",e)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"ElCard",props:["header","bodyStyle"]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(8);t.default={name:"ElCheckbox",mixins:[i.a],componentName:"ElCheckbox",data:function(){return{selfModel:!1,focus:!1}},computed:{model:{get:function(){return this.isGroup?this.store:void 0!==this.value?this.value:this.selfModel},set:function(e){if(this.isGroup){var t=!1;void 0!==this._checkboxGroup.min&&e.length<this._checkboxGroup.min&&(t=!0),void 0!==this._checkboxGroup.max&&e.length>this._checkboxGroup.max&&(t=!0),!1===t&&this.dispatch("ElCheckboxGroup","input",[e])}else void 0!==this.value?this.$emit("input",e):this.selfModel=e}},isChecked:function(){return"[object Boolean]"==={}.toString.call(this.model)?this.model:Array.isArray(this.model)?this.model.indexOf(this.label)>-1:null!==this.model&&void 0!==this.model?this.model===this.trueLabel:void 0},isGroup:function(){for(var e=this.$parent;e;){if("ElCheckboxGroup"===e.$options.componentName)return this._checkboxGroup=e,!0;e=e.$parent}return!1},store:function(){return this._checkboxGroup?this._checkboxGroup.value:this.value}},props:{value:{},label:{},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:String,trueLabel:[String,Number],falseLabel:[String,Number]},methods:{addToStore:function(){Array.isArray(this.model)&&-1===this.model.indexOf(this.label)?this.model.push(this.label):this.model=this.trueLabel||!0},handleChange:function(e){var t=this;this.$emit("change",e),this.isGroup&&this.$nextTick(function(e){t.dispatch("ElCheckboxGroup","change",[t._checkboxGroup.value])})}},created:function(){this.checked&&this.addToStore()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(52),s=n(8);t.default={name:"ElDialog",mixins:[i.a,s.a],props:{title:{type:String,default:""},modal:{type:Boolean,default:!0},modalAppendToBody:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},size:{type:String,default:"small"},customClass:{type:String,default:""},top:{type:String,default:"15%"},beforeClose:Function},watch:{visible:function(e){var t=this;this.$emit("update:visible",e),e?(this.$emit("open"),this.$el.addEventListener("scroll",this.updatePopper),this.$nextTick(function(){t.$refs.dialog.scrollTop=0})):(this.$el.removeEventListener("scroll",this.updatePopper),this.$emit("close"))}},computed:{sizeClass:function(){return"el-dialog--"+this.size},style:function(){return"full"===this.size?{}:{top:this.top}}},methods:{handleWrapperClick:function(){this.closeOnClickModal&&this.handleClose()},handleClose:function(){"function"==typeof this.beforeClose?this.beforeClose(this.hide):this.hide()},hide:function(){this.$emit("update:visible",!1),this.$emit("visible-change",!1)},updatePopper:function(){this.broadcast("ElSelectDropdown","updatePopper"),this.broadcast("ElDropdownMenu","updatePopper")}},mounted:function(){this.visible&&(this.rendered=!0,this.open())}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(8);t.default={name:"ElDropdownItem",mixins:[i.a],props:{command:String,disabled:Boolean,divided:Boolean},methods:{handleClick:function(e){this.dispatch("ElDropdown","menu-item-click",[this.command,this])}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(156);t.default={name:"ElDropdownMenu",componentName:"ElDropdownMenu",mixins:[i.a],created:function(){var e=this;this.$on("updatePopper",this.updatePopper),this.$on("visible",function(t){e.showPopper=t})},mounted:function(){this.$parent.popperElm=this.popperElm=this.$el,this.referenceElm=this.$parent.$el},watch:{"$parent.menuAlign":{immediate:!0,handler:function(e){this.currentPlacement="bottom-"+e}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(152),s=n(8),r=n(150),a=n(149);t.default={name:"ElDropdown",componentName:"ElDropdown",mixins:[s.a],directives:{Clickoutside:i.a},components:{ElButton:r.a,ElButtonGroup:a.a},props:{trigger:{type:String,default:"hover"},menuAlign:{type:String,default:"end"},type:String,size:String,splitButton:Boolean,hideOnClick:{type:Boolean,default:!0}},data:function(){return{timeout:null,visible:!1}},mounted:function(){this.$on("menu-item-click",this.handleMenuItemClick),this.initEvent()},watch:{visible:function(e){this.broadcast("ElDropdownMenu","visible",e)}},methods:{show:function(){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(){e.visible=!0},250)},hide:function(){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(){e.visible=!1},150)},handleClick:function(){this.visible=!this.visible},initEvent:function(){var e=this.trigger,t=this.show,n=this.hide,i=this.handleClick,s=this.splitButton,r=s?this.$refs.trigger.$el:this.$slots.default[0].elm;if("hover"===e){r.addEventListener("mouseenter",t),r.addEventListener("mouseleave",n);var a=this.$slots.dropdown[0].elm;a.addEventListener("mouseenter",t),a.addEventListener("mouseleave",n)}else"click"===e&&r.addEventListener("click",i)},handleMenuItemClick:function(e,t){this.hideOnClick&&(this.visible=!1),this.$emit("command",e,t)}},render:function(e){var t=this,n=this.hide,i=this.splitButton,s=this.type,r=this.size,a=function(e){t.$emit("click")};return e("div",{class:"el-dropdown",directives:[{name:"clickoutside",value:n}]},[i?e("el-button-group",null,[e("el-button",{attrs:{type:s,size:r},nativeOn:{click:a}},[this.$slots.default]),e("el-button",{ref:"trigger",attrs:{type:s,size:r},class:"el-dropdown__caret-button"},[e("i",{class:"el-dropdown__icon el-icon-caret-bottom"},[])])]):this.$slots.default,this.$slots.dropdown])}}},function(e,t,n){"use strict";function i(){}function s(e,t){var n=e;t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");for(var i=t.split("."),s=0,r=i.length;s<r-1;++s){var a=i[s];if(!(a in n))throw new Error("please transfer a valid prop path to form item!");n=n[a]}return{o:n,k:i[s],v:n[i[s]]}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(30),a=n.n(r),o=n(8);t.default={name:"ElFormItem",componentName:"ElFormItem",mixins:[o.a],props:{label:String,labelWidth:String,prop:String,required:Boolean,rules:[Object,Array],error:String,validateStatus:String,showMessage:{type:Boolean,default:!0}},watch:{error:function(e){this.validateMessage=e,this.validateState=e?"error":""},validateStatus:function(e){this.validateState=e}},computed:{labelStyle:function(){var e={};if("top"===this.form.labelPosition)return e;var t=this.labelWidth||this.form.labelWidth;return t&&(e.width=t),e},contentStyle:function(){var e={};if("top"===this.form.labelPosition||this.form.inline)return e;var t=this.labelWidth||this.form.labelWidth;return t&&(e.marginLeft=t),e},form:function(){for(var e=this.$parent;"ElForm"!==e.$options.componentName;)e=e.$parent;return e},fieldValue:{cache:!1,get:function(){var e=this.form.model;if(e&&this.prop){var t=this.prop;return-1!==t.indexOf(":")&&(t=t.replace(/:/,".")),s(e,t).v}}}},data:function(){return{validateState:"",validateMessage:"",validateDisabled:!1,validator:{},isRequired:!1}},methods:{validate:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,s=this.getFilteredRule(e);if(!s||0===s.length)return n(),!0;this.validateState="validating";var r={};r[this.prop]=s;var o=new a.a(r),l={};l[this.prop]=this.fieldValue,o.validate(l,{firstFields:!0},function(e,i){t.validateState=e?"error":"success",t.validateMessage=e?e[0].message:"",n(t.validateMessage)})},resetField:function(){this.validateState="",this.validateMessage="";var e=this.form.model,t=this.fieldValue,n=this.prop;-1!==n.indexOf(":")&&(n=n.replace(/:/,"."));var i=s(e,n);Array.isArray(t)?(this.validateDisabled=!0,i.o[i.k]=[].concat(this.initialValue)):(this.validateDisabled=!0,i.o[i.k]=this.initialValue)},getRules:function(){var e=this.form.rules,t=this.rules;return e=e?e[this.prop]:[],[].concat(t||e||[])},getFilteredRule:function(e){return this.getRules().filter(function(t){return!t.trigger||-1!==t.trigger.indexOf(e)})},onFieldBlur:function(){this.validate("blur")},onFieldChange:function(){if(this.validateDisabled)return void(this.validateDisabled=!1);this.validate("change")}},mounted:function(){var e=this;if(this.prop){this.dispatch("ElForm","el.form.addField",[this]);var t=this.fieldValue;Array.isArray(t)&&(t=[].concat(t)),Object.defineProperty(this,"initialValue",{value:t});var n=this.getRules();n.length&&(n.every(function(t){if(t.required)return e.isRequired=!0,!1}),this.$on("el.form.blur",this.onFieldBlur),this.$on("el.form.change",this.onFieldChange))}},beforeDestroy:function(){this.dispatch("ElForm","el.form.removeField",[this])}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"ElForm",componentName:"ElForm",props:{model:Object,rules:Object,labelPosition:String,labelWidth:String,labelSuffix:{type:String,default:""},inline:Boolean,showMessage:{type:Boolean,default:!0}},watch:{rules:function(){this.validate()}},data:function(){return{fields:[]}},created:function(){var e=this;this.$on("el.form.addField",function(t){t&&e.fields.push(t)}),this.$on("el.form.removeField",function(t){t.prop&&e.fields.splice(e.fields.indexOf(t),1)})},methods:{resetFields:function(){this.fields.forEach(function(e){e.resetField()})},validate:function(e){var t=this,n=!0,i=0;0===this.fields.length&&e&&e(!0),this.fields.forEach(function(s,r){s.validate("",function(s){s&&(n=!1),"function"==typeof e&&++i===t.fields.length&&e(n)})})},validateField:function(e,t){var n=this.fields.filter(function(t){return t.prop===e})[0];if(!n)throw new Error("must call validateField with valid prop string!");n.validate("",t)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),s=n(151),r=n(51);t.default={name:"ElInput",componentName:"ElInput",mixins:[i.a],data:function(){return{currentValue:this.value,textareaCalcStyle:{}}},props:{value:[String,Number],placeholder:String,size:String,resize:String,readonly:Boolean,autofocus:Boolean,icon:String,disabled:Boolean,type:{type:String,default:"text"},name:String,autosize:{type:[Boolean,Object],default:!1},rows:{type:Number,default:2},autoComplete:{type:String,default:"off"},form:String,maxlength:Number,minlength:Number,max:{},min:{},step:{},validateEvent:{type:Boolean,default:!0},onIconClick:Function},computed:{validating:function(){return"validating"===this.$parent.validateState},textareaStyle:function(){return n.i(r.a)({},this.textareaCalcStyle,{resize:this.resize})}},watch:{value:function(e,t){this.setCurrentValue(e)}},methods:{handleBlur:function(e){this.$emit("blur",e),this.validateEvent&&this.dispatch("ElFormItem","el.form.blur",[this.currentValue])},inputSelect:function(){this.$refs.input.select()},resizeTextarea:function(){if(!this.$isServer){var e=this.autosize,t=this.type;if(e&&"textarea"===t){var i=e.minRows,r=e.maxRows;this.textareaCalcStyle=n.i(s.a)(this.$refs.textarea,i,r)}}},handleFocus:function(e){this.$emit("focus",e)},handleInput:function(e){var t=e.target.value;this.$emit("input",t),this.setCurrentValue(t),this.$emit("change",t)},handleIconClick:function(e){this.onIconClick&&this.onIconClick(e),this.$emit("click",e)},setCurrentValue:function(e){var t=this;e!==this.currentValue&&(this.$nextTick(function(e){t.resizeTextarea()}),this.currentValue=e,this.validateEvent&&this.dispatch("ElFormItem","el.form.change",[e]))}},created:function(){this.$on("inputSelect",this.inputSelect)},mounted:function(){this.resizeTextarea()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"ElTabPane",componentName:"ElTabPane",props:{label:String,labelContent:Function,name:String,closable:Boolean,disabled:Boolean},data:function(){return{index:null}},computed:{isClosable:function(){return this.closable||this.$parent.closable},active:function(){return this.$parent.currentName===(this.name||this.index)}},mounted:function(){this.$parent.addPanes(this)},destroyed:function(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),this.$parent.removePanes(this)},watch:{label:function(){this.$parent.$forceUpdate()}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),s={};t.default={name:"icon",props:{name:{type:String,validator:function(e){return e?e in s||(i.default.util.warn('Invalid prop: prop "icon" is referring to an unregistered icon "'+e+'".\nPlesase make sure you have imported this icon before using it.',this),!1):null}},scale:[Number,String],spin:Boolean,inverse:Boolean,flip:{validator:function(e){return"horizontal"===e||"vertical"===e}},label:String},data:function(){return{x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}},computed:{normalizedScale:function(){var e=this.scale;return e=void 0===e?1:Number(e),isNaN(e)||e<=0?(i.default.util.warn('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):e*this.outerScale},clazz:function(){return{"fa-icon":!0,"fa-spin":this.spin,"fa-flip-horizontal":"horizontal"===this.flip,"fa-flip-vertical":"vertical"===this.flip,"fa-inverse":this.inverse}},icon:function(){return this.name?s[this.name]:null},box:function(){return this.icon?"0 0 "+this.icon.width+" "+this.icon.height:"0 0 "+this.width+" "+this.height},ratio:function(){if(!this.icon)return 1;var e=this.icon,t=e.width,n=e.height;return Math.max(t,n)/16},width:function(){return this.childrenWidth||this.icon&&this.icon.width/this.ratio*this.normalizedScale||0},height:function(){return this.childrenHeight||this.icon&&this.icon.height/this.ratio*this.normalizedScale||0},style:function(){return 1!==this.normalizedScale&&{fontSize:this.normalizedScale+"em"}}},mounted:function(){var e=this;if(!this.icon){this.$children.forEach(function(t){t.outerScale=e.normalizedScale});var t=0,n=0;this.$children.forEach(function(e){t=Math.max(t,e.width),n=Math.max(n,e.height)}),this.childrenWidth=t,this.childrenHeight=n,this.$children.forEach(function(e){e.x=(t-e.width)/2,e.y=(n-e.height)/2})}},register:function(e){for(var t in e){var n=e[t];n.paths||(n.paths=[]),n.d&&n.paths.push({d:n.d}),n.polygons||(n.polygons=[]),n.points&&n.polygons.push({points:n.points}),s[t]=n}},icons:s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"app"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"group-box",props:["group","selectedGroup"],computed:{avatarSrc:function(){return"/api/groups/"+this.group.user_name+"/avatar"},isSelected:function(){return this.group.user_name===this.selectedGroup.user_name}},methods:{select:function(e){this.$emit("select",this.group)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(103),s=n.n(i),r=n(174),a=n.n(r),o=n(54),l=n.n(o),c=n(173),u=n.n(c),d=n(177),h=n.n(d),f=n(165),p=n.n(f),m=n(166),v=n.n(m),g=n(170),_=n.n(g),b=n(171),x=n.n(b),y=n(172),C=n.n(y),$=n(169),w=n.n($),k=n(168),F=n.n(k),S=n(167),E=n.n(S),M=n(55),A=n.n(M);n(162);t.default={name:"index",methods:{checkLogin:function(){var e=this;this.$http.get("/api/checklogin").then(function(t){"true"!==t.data&&e.logout()},function(t){e.logout()})},checkLoginPolling:function(){var e=this;this.checkTimer=setInterval(function(){e.checkLogin()},5e3)},handleCommand:function(e){"logout"===e?this.logout():console.log(e)},logout:function(){var e=this;this.$http.get("/api/logout").then(function(t){e.clearInterval(e.timer),e.clearInterval(e.checkTimer),e.$router.push({path:"login"})})},loadData:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loadFriends(),this.loadGroups(e)},loadFriends:function(){var e=this;this.$http.get("/api/friends").then(function(t){e.allFriends.length>0&&(e.oldFriends=e.allFriends),e.allFriends=t.data.friends,e.user=e.allFriends[0],e.userAvatarSrc="/api/friends/"+e.user.user_name+"/avatar",e.oldFriends.length>0&&(e.newFriends=e.allFriends.filter(function(t){return-1===e.oldFriends.map(function(e){return e.user_name}).indexOf(t.user_name)}))},function(e){console.error("get response error"),console.log(e)})},loadGroups:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loadingGroups=t,this.$http.get("/api/groups").then(function(n){var i=n.data.groups.filter(function(e){return e.user_name.startsWith("@@")});if(t)e.groups=i;else{i.filter(function(t){return-1===e.groups.map(function(e){return e.user_name}).indexOf(t.user_name)}).forEach(function(t){return e.groups.push(t)})}e.loadingGroups=!1},function(e){console.error("get response error"),console.log(e)})},selectGroup:function(e){var t=this;this.selectedGroup=e,this.groupName=e.name,this.loadingMembers=!0,this.$http.get("/api/groups/"+this.selectedGroup.user_name+"/members").then(function(e){var n=e.data.members;t.nonFriends=n.filter(function(e){return!1===e.is_friend}),t.friends=n.filter(function(e){return e.is_friend}),t.friendsInAdding=t.allFriendsInAdding.filter(function(e){return n.map(function(e){return e.user_name}).indexOf(e.user_name)>-1}),t.friendsInAdding.forEach(function(e){return t.deleteUser(t.nonFriends,e)}),t.original.friends=t.friends,t.original.nonFriends=t.nonFriends,t.original.friendsInAdding=t.friendsInAdding,t.loadingMembers=!1,t.disableAdd=!1},function(e){console.error("get response error"),console.log(e)})},selectTab:function(e){"nonFriends"===e.name?this.disableAdd=!1:this.disableAdd=!0},selectUser:function(e,t){t?this.selectedUsers.push(e):this.deleteUser(this.selectedUsers,e)},selectAllUsers:function(e){var t=this;this.selectAll?(this.nonFriends.forEach(function(e){return t.selectedUsers.push(e)}),this.$refs.nonFriendsBox.forEach(function(e){e.isSelected=!0})):(this.selectedUsers=[],this.$refs.nonFriendsBox.forEach(function(e){e.isSelected=!1}))},confirmAdd:function(e){var t=this;this.showDialog=!0;var n=this.friends.filter(function(e){return e.user_name===t.user.user_name}),i=s()(n,1),r=i[0];this.verifyMessage="我是"+r.name},addFriends:function(e){var t=this;this.showDialog=!1;var n=0,i=this.selectedUsers.length,s=0;this.selectedUsers.forEach(function(e){setTimeout(function(){n+=1,t.addFriend(e,n,i)},5e3*s+Math.floor(5*Math.random()*1e3)),s+=1})},addFriend:function(e,t,n){var i=this;this.$http.post("/api/friends",{user_name:e.user_name,verify_msg:this.verifyMessage}).then(function(s){i.deleteUser(i.nonFriends,e),i.deleteUser(i.selectedUsers,e),i.friendsInAdding.push(e),i.allFriendsInAdding.push(e),i.$notify({title:"OK",message:"["+t+"/"+n+"] 已申请添加"+e.name,type:"success"})})},deleteUser:function(e,t){var n=e.findIndex(function(e){return e.user_name===t.user_name});return n>-1&&e.splice(n,1),e},searchFriends:function(e){var t=this;this.searchText||(this.friends=this.original.friends,this.nonFriends=this.original.nonFriends,this.friendsInAdding=this.original.friendsInAdding),console.log(this.searchText),this.nonFriends=this.original.nonFriends.filter(function(e){return e.name.indexOf(t.searchText)>-1}),this.friends=this.original.friends.filter(function(e){return e.name.indexOf(t.searchText)>-1}),this.friendsInAdding=this.original.friendsInAdding.filter(function(e){return e.name.indexOf(t.searchText)>-1})}},mounted:function(){this.checkLogin(),this.checkLoginPolling(),this.loadData(!0)},watch:{newFriends:function(e){var t=this;e.forEach(function(e){t.$notify({title:"新好友",message:"已添加"+e.name+"为好友"})})}},data:function(){return{timer:null,checkTimer:null,logged:!1,userAvatarSrc:"",user:{},groups:[],selectedGroup:{user_name:""},groupName:"群成员",groupMembers:{},nonFriends:[],friends:[],friendsInAdding:[],allFriendsInAdding:[],loadingGroups:!1,loadingMembers:!1,selectedUsers:[],searchText:"",disableAdd:!0,selectAll:!1,showDialog:!1,verifyMessage:"",original:{},allFriends:[],oldFriends:[],newFriends:[]}},components:{ElDropdownItem:E.a,ElDropdownMenu:F.a,ElDropdown:w.a,Icon:A.a,ElInput:C.a,ElForm:x.a,ElFormItem:_.a,ElDialog:v.a,ElCheckbox:p.a,userBox:h.a,ElTabPane:u.a,ElButton:l.a,groupBox:a.a}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"login",methods:{login:function(){var e=this;this.$http.get("/api/login").then(function(t){var n=t.data;"200"===n?e.$router.push({path:"index"}):"408"===n?e.login():"201"===n?(e.scanned=!0,e.tipText="请在手机上确认登录",e.login()):window.location.reload()},function(e){console.error("get response error"),console.log(e)})}},data:function(){return{tipText:"请用微信扫描二维码登录",scanned:!1}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(164),s=n.n(i);t.default={components:{ElCard:s.a},name:"user-box",props:["group","user","isFriend"],computed:{avatarSrc:function(){return"/api/groups/"+this.group.user_name+"/"+this.user.user_name+"/avatar"},isMen:function(){return 1===this.user.sex},isWomen:function(){return 2===this.user.sex}},methods:{select:function(e){this.isFriend||(this.isSelected=!this.isSelected,this.$emit("select",this.user,this.isSelected))}},data:function(){return{isSelected:!1}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,function(e,t,n){var i=n(2)(n(83),n(190),null,null);e.exports=i.exports},function(e,t,n){var i=n(2)(n(85),n(194),null,null);e.exports=i.exports},function(e,t,n){var i=n(2)(n(86),n(184),null,null);e.exports=i.exports},function(e,t,n){var i=n(2)(n(87),n(191),null,null);e.exports=i.exports},function(e,t,n){var i=n(2)(n(88),n(189),null,null);e.exports=i.exports},function(e,t,n){var i=n(2)(n(89),n(187),null,null);e.exports=i.exports},function(e,t,n){var i=n(2)(n(90),null,null,null);e.exports=i.exports},function(e,t,n){var i=n(2)(n(91),n(179),null,null);e.exports=i.exports},function(e,t,n){var i=n(2)(n(92),n(178),null,null);e.exports=i.exports},function(e,t,n){var i=n(2)(n(93),n(193),null,null);e.exports=i.exports},function(e,t,n){var i=n(2)(n(94),n(186),null,null);e.exports=i.exports},function(e,t,n){n(161);var i=n(2)(n(97),n(192),null,null);e.exports=i.exports},function(e,t,n){n(158);var i=n(2)(n(98),n(182),null,null);e.exports=i.exports},function(e,t,n){n(159);var i=n(2)(n(99),n(185),null,null);e.exports=i.exports},function(e,t,n){n(157);var i=n(2)(n(100),n(181),null,null);e.exports=i.exports},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("form",{staticClass:"el-form",class:[e.labelPosition?"el-form--label-"+e.labelPosition:"",{"el-form--inline":e.inline}]},[e._t("default")],2)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-form-item",class:{"is-error":"error"===e.validateState,"is-validating":"validating"===e.validateState,"is-required":e.isRequired||e.required}},[e.label?n("label",{staticClass:"el-form-item__label",style:e.labelStyle,attrs:{for:e.prop}},[e._t("label",[e._v(e._s(e.label+e.form.labelSuffix))])],2):e._e(),e._v(" "),n("div",{staticClass:"el-form-item__content",style:e.contentStyle},[e._t("default"),e._v(" "),n("transition",{attrs:{name:"el-zoom-in-top"}},["error"===e.validateState&&e.showMessage&&e.form.showMessage?n("div",{staticClass:"el-form-item__error"},[e._v(e._s(e.validateMessage))]):e._e()])],2)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"el-button",class:[e.type?"el-button--"+e.type:"",e.size?"el-button--"+e.size:"",{"is-disabled":e.disabled,"is-loading":e.loading,"is-plain":e.plain}],attrs:{disabled:e.disabled,autofocus:e.autofocus,type:e.nativeType},on:{click:e.handleClick}},[e.loading?n("i",{staticClass:"el-icon-loading"}):e._e(),e._v(" "),e.icon&&!e.loading?n("i",{class:"el-icon-"+e.icon}):e._e(),e._v(" "),e.$slots.default?n("span",[e._t("default")],2):e._e()])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"friend-container"},[n("div",{staticClass:"friend-info",class:{selected:e.isSelected},on:{click:e.select}},[n("img",{staticClass:"avatar",attrs:{src:e.avatarSrc}}),e._v(" "),n("div",{staticClass:"friend-text"},[n("p",{staticClass:"friend-name"},[e._v(e._s(e.user.name)),n("br"),e._v(" "),n("i",{class:{"icon-men":1===e.user.sex,"icon-women":2===e.user.sex}}),e._v(" "),n("span",{staticClass:"loc"},[e._v(e._s(e.user.province)+" "+e._s(e.user.city))])])])])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"heading"},[n("div",{staticClass:"user-info"},[n("img",{staticClass:"avatar",attrs:{src:e.userAvatarSrc}}),e._v(" "),n("span",{staticClass:"user-name"},[e._v(e._s(e.user.name))])]),e._v(" "),n("el-dropdown",{staticClass:"more-menu",attrs:{trigger:"click"},on:{command:e.handleCommand}},[n("span",{staticClass:"el-dropdown-link"},[n("i",{staticClass:"el-icon-more"})]),e._v(" "),n("el-dropdown-menu",{slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"logout"}},[e._v("注销")])],1)],1)],1),e._v(" "),n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:8}},[n("el-card",{directives:[{name:"loading",rawName:"v-loading.body",value:e.loadingGroups,expression:"loadingGroups",modifiers:{body:!0}}]},[n("div",{slot:"header"},[n("span",[e._v("群列表("+e._s(e.groups.length)+")")]),e._v(" "),n("span",{staticClass:"refresh-icon",attrs:{title:"刷新"},on:{click:e.loadGroups}},[n("icon",{attrs:{name:"refresh"}})],1)]),e._v(" "),e._l(e.groups,function(t){return n("group-box",{key:t.user_name,attrs:{group:t,selectedGroup:e.selectedGroup},on:{select:e.selectGroup}})})],2)],1),e._v(" "),n("el-col",{attrs:{span:16}},[n("el-card",{directives:[{name:"loading",rawName:"v-loading.body",value:e.loadingMembers,expression:"loadingMembers",modifiers:{body:!0}}]},[n("el-tabs",{attrs:{value:"nonFriends"},on:{"tab-click":e.selectTab}},[n("el-tab-pane",{attrs:{name:"nonFriends"}},[n("span",{slot:"label"},[e._v("陌生人("+e._s(e.nonFriends.length)+")")]),e._v(" "),n("div",e._l(e.nonFriends,function(t,i){return n("user-box",{key:t.user_name,ref:"nonFriendsBox",refInFor:!0,attrs:{user:t,isFriend:!1,group:e.selectedGroup},on:{select:e.selectUser}})}))]),e._v(" "),n("el-tab-pane",{attrs:{name:"inAdding"}},[n("span",{slot:"label"},[e._v("添加中("+e._s(e.friendsInAdding.length)+")")]),e._v(" "),n("div",e._l(e.friendsInAdding,function(t,i){return n("user-box",{key:t.user_name,ref:"inAddingBox",refInFor:!0,attrs:{user:t,isFriend:!0,group:e.selectedGroup},on:{select:e.selectUser}})}))]),e._v(" "),n("el-tab-pane",{attrs:{name:"friends"}},[n("span",{slot:"label"},[e._v("好友("+e._s(e.friends.length)+")")]),e._v(" "),e._l(e.friends,function(t){return n("user-box",{key:t.user_name,attrs:{user:t,isFriend:!0,group:e.selectedGroup},on:{select:e.selectUser}})})],2)],1),e._v(" "),n("div",{staticClass:"search-box"},[n("el-input",{attrs:{placeholder:"搜索联系人",icon:"search"},on:{change:e.searchFriends},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1),e._v(" "),n("div",{staticClass:"select-box"},[n("el-checkbox",{attrs:{disabled:e.disableAdd},on:{change:e.selectAllUsers},model:{value:e.selectAll,callback:function(t){e.selectAll=t},expression:"selectAll"}},[e._v("全选")]),e._v(" "),n("el-button",{staticClass:"add-btn",attrs:{size:"small",type:"primary",disabled:e.disableAdd},on:{click:e.confirmAdd}},[e._v(" 加为好友")])],1)],1)],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"添加联系人"},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[n("el-form",{attrs:{labelWidth:"80px"}},[n("el-form-item",{attrs:{label:"验证消息"}},[n("el-input",{attrs:{autofocus:"autofocus",placeholder:"请输入验证消息"},model:{value:e.verifyMessage,callback:function(t){e.verifyMessage=t},expression:"verifyMessage"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(t){e.showDialog=!1}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.addFriends}},[e._v("确定")])],1)],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("router-view")],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"el-checkbox"},[n("span",{staticClass:"el-checkbox__input",class:{"is-disabled":e.disabled,"is-checked":e.isChecked,"is-indeterminate":e.indeterminate,"is-focus":e.focus}},[n("span",{staticClass:"el-checkbox__inner"}),e._v(" "),e.trueLabel||e.falseLabel?n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox",name:e.name,disabled:e.disabled,"true-value":e.trueLabel,"false-value":e.falseLabel},domProps:{checked:Array.isArray(e.model)?e._i(e.model,null)>-1:e._q(e.model,e.trueLabel)},on:{change:e.handleChange,focus:function(t){e.focus=!0},blur:function(t){e.focus=!1},__c:function(t){var n=e.model,i=t.target,s=i.checked?e.trueLabel:e.falseLabel;if(Array.isArray(n)){var r=e._i(n,null);s?r<0&&(e.model=n.concat(null)):r>-1&&(e.model=n.slice(0,r).concat(n.slice(r+1)))}else e.model=s}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox",disabled:e.disabled,name:e.name},domProps:{value:e.label,checked:Array.isArray(e.model)?e._i(e.model,e.label)>-1:e.model},on:{change:e.handleChange,focus:function(t){e.focus=!0},blur:function(t){e.focus=!1},__c:function(t){var n=e.model,i=t.target,s=!!i.checked;if(Array.isArray(n)){var r=e.label,a=e._i(n,r);s?a<0&&(e.model=n.concat(r)):a>-1&&(e.model=n.slice(0,a).concat(n.slice(a+1)))}else e.model=s}}})]),e._v(" "),e.$slots.default||e.label?n("span",{staticClass:"el-checkbox__label"},[e._t("default"),e._v(" "),e.$slots.default?e._e():[e._v(e._s(e.label))]],2):e._e()])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"wrapper"}},[n("div",{attrs:{id:"loginBox"}},[n("img",{attrs:{id:"qrcode",src:"/api/qrcode.png"},on:{load:e.login}}),e._v(" "),n("div",{attrs:{id:"tipText"}},[n("p",{directives:[{name:"show",rawName:"v-show",value:e.scanned,expression:"scanned"}]},[e._v("扫描成功")]),e._v(" "),n("p",[e._v(e._s(e.tipText))])])]),e._v(" "),n("router-view")],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{directives:[{name:"show",rawName:"v-show",value:e.active,expression:"active"}],staticClass:"el-tab-pane"},[e._t("default")],2)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":e.doDestroy}},[n("ul",{directives:[{name:"show",rawName:"v-show",value:e.showPopper,expression:"showPopper"}],staticClass:"el-dropdown-menu"},[e._t("default")],2)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{class:e.clazz,style:e.style,attrs:{version:"1.1",role:e.label?"img":"presentation","aria-label":e.label,x:e.x,y:e.y,width:e.width,height:e.height,viewBox:e.box}},[e._t("default",[e.icon&&e.icon.paths?e._l(e.icon.paths,function(t){return n("path",e._b({},"path",t))}):e._e(),e._v(" "),e.icon&&e.icon.polygons?e._l(e.icon.polygons,function(t){return n("polygon",e._b({},"polygon",t))}):e._e(),e._v("\b\n    "),e.icon&&e.icon.raw?[n("g",{domProps:{innerHTML:e._s(e.icon.raw)}})]:e._e()])],2)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("li",{staticClass:"el-dropdown-menu__item",class:{"is-disabled":e.disabled,"el-dropdown-menu__item--divided":e.divided},on:{click:e.handleClick}},[e._t("default")],2)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"el-button-group"},[e._t("default")],2)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"dialog-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-dialog__wrapper",on:{click:function(t){if(t.target!==t.currentTarget)return null;e.handleWrapperClick(t)}}},[n("div",{ref:"dialog",staticClass:"el-dialog",class:[e.sizeClass,e.customClass],style:e.style},[n("div",{staticClass:"el-dialog__header"},[e._t("title",[n("span",{staticClass:"el-dialog__title"},[e._v(e._s(e.title))])]),e._v(" "),n("div",{staticClass:"el-dialog__headerbtn"},[e.showClose?n("i",{staticClass:"el-dialog__close el-icon el-icon-close",on:{click:e.handleClose}}):e._e()])],2),e._v(" "),e.rendered?n("div",{staticClass:"el-dialog__body"},[e._t("default")],2):e._e(),e._v(" "),e.$slots.footer?n("div",{staticClass:"el-dialog__footer"},[e._t("footer")],2):e._e()])])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"group-info",class:{selected:e.isSelected},on:{click:e.select}},[n("img",{staticClass:"avatar",attrs:{src:e.avatarSrc}}),e._v(" "),n("span",{staticClass:"group-name"},[e._v(e._s(e.group.name))])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["textarea"===e.type?"el-textarea":"el-input",e.size?"el-input--"+e.size:"",{"is-disabled":e.disabled,"el-input-group":e.$slots.prepend||e.$slots.append,"el-input-group--append":e.$slots.append,"el-input-group--prepend":e.$slots.prepend}]},["textarea"!==e.type?[e.$slots.prepend?n("div",{staticClass:"el-input-group__prepend"},[e._t("prepend")],2):e._e(),e._v(" "),e._t("icon",[e.icon?n("i",{staticClass:"el-input__icon",class:["el-icon-"+e.icon,e.onIconClick?"is-clickable":""],on:{click:e.handleIconClick}}):e._e()]),e._v(" "),"textarea"!==e.type?n("input",e._b({ref:"input",staticClass:"el-input__inner",attrs:{autocomplete:e.autoComplete},domProps:{value:e.currentValue},on:{input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur}},"input",e.$props)):e._e(),e._v(" "),e.validating?n("i",{staticClass:"el-input__icon el-icon-loading"}):e._e(),e._v(" "),e.$slots.append?n("div",{staticClass:"el-input-group__append"},[e._t("append")],2):e._e()]:n("textarea",e._b({ref:"textarea",staticClass:"el-textarea__inner",style:e.textareaStyle,domProps:{value:e.currentValue},on:{input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur}},"textarea",e.$props))],2)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-card"},[e.$slots.header||e.header?n("div",{staticClass:"el-card__header"},[e._t("header",[e._v(e._s(e.header))])],2):e._e(),e._v(" "),n("div",{staticClass:"el-card__body",style:e.bodyStyle},[e._t("default")],2)])},staticRenderFns:[]}},,,,function(e,t){}]),[82]);
//# sourceMappingURL=app.d17db965d415c0758d31.js.map